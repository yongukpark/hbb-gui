{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///Users/bag-yong-ug/Desktop/hbb-gui/app/api/annotations/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\"\nimport { promises as fs } from \"fs\"\nimport path from \"path\"\n\nconst FILE_PATH = path.join(process.cwd(), \"public\", \"data\", \"head-annotations.json\")\n\nasync function ensureFile() {\n  const dir = path.dirname(FILE_PATH)\n  await fs.mkdir(dir, { recursive: true })\n}\n\nexport async function GET() {\n  try {\n    const raw = await fs.readFile(FILE_PATH, \"utf8\")\n    return new NextResponse(raw, {\n      status: 200,\n      headers: { \"content-type\": \"application/json; charset=utf-8\" },\n    })\n  } catch {\n    return NextResponse.json({ error: \"annotations file not found\" }, { status: 404 })\n  }\n}\n\nexport async function PUT(req: Request) {\n  try {\n    const data = await req.json()\n    if (!data || typeof data !== \"object\") {\n      return NextResponse.json({ error: \"invalid json body\" }, { status: 400 })\n    }\n\n    const now = new Date().toISOString()\n    const payload = {\n      ...data,\n      updatedAt: now,\n      createdAt: typeof data.createdAt === \"string\" ? data.createdAt : now,\n    }\n\n    await ensureFile()\n    await fs.writeFile(FILE_PATH, `${JSON.stringify(payload, null, 2)}\\n`, \"utf8\")\n\n    return NextResponse.json(payload, { status: 200 })\n  } catch {\n    return NextResponse.json({ error: \"failed to write annotations file\" }, { status: 500 })\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;;;;AAEA,MAAM,YAAY,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,UAAU,QAAQ;AAE7D,eAAe;IACb,MAAM,MAAM,4GAAI,CAAC,OAAO,CAAC;IACzB,MAAM,yGAAE,CAAC,KAAK,CAAC,KAAK;QAAE,WAAW;IAAK;AACxC;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,MAAM,MAAM,yGAAE,CAAC,QAAQ,CAAC,WAAW;QACzC,OAAO,IAAI,gJAAY,CAAC,KAAK;YAC3B,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAkC;QAC/D;IACF,EAAE,OAAM;QACN,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA6B,GAAG;YAAE,QAAQ;QAAI;IAClF;AACF;AAEO,eAAe,IAAI,GAAY;IACpC,IAAI;QACF,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,IAAI,CAAC,QAAQ,OAAO,SAAS,UAAU;YACrC,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAoB,GAAG;gBAAE,QAAQ;YAAI;QACzE;QAEA,MAAM,MAAM,IAAI,OAAO,WAAW;QAClC,MAAM,UAAU;YACd,GAAG,IAAI;YACP,WAAW;YACX,WAAW,OAAO,KAAK,SAAS,KAAK,WAAW,KAAK,SAAS,GAAG;QACnE;QAEA,MAAM;QACN,MAAM,yGAAE,CAAC,SAAS,CAAC,WAAW,GAAG,KAAK,SAAS,CAAC,SAAS,MAAM,GAAG,EAAE,CAAC,EAAE;QAEvE,OAAO,gJAAY,CAAC,IAAI,CAAC,SAAS;YAAE,QAAQ;QAAI;IAClD,EAAE,OAAM;QACN,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAmC,GAAG;YAAE,QAAQ;QAAI;IACxF;AACF"}}]
}